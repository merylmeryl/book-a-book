_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"20a2":function(e,t,n){e.exports=n("nOHt")},EqCD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books/[id]/edit",function(){return n("aO3D")}])},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,o,c,a){try{var s=e[c](a),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var a=e.apply(t,n);function s(e){r(a,o,c,s,i,"next",e)}function i(e){r(a,o,c,s,i,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return o}))},aO3D:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),o=n.n(r),c=n("HaE+"),a=n("nKUr"),s=n("rEGw"),i=n("80PL"),u=n("LBrS"),l=function(e){var t=e.book,n=Object(a.jsx)(a.Fragment,{});return n=t&&void 0!==t?Object(a.jsx)(s.a,{book:t}):Object(a.jsx)("p",{className:"text-center mx-auto py-2 mb-2 text-2xl bg-gray-800 text-white bg-opacity-80 rounded-lg w-3/4",children:"Couldn't find that book. Maybe someone else already deleted it."}),Object(a.jsx)(i.a,{children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u.a,{text:"Edit Book"}),n]})})};l.getInitialProps=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query.id,e.next=3,fetch("".concat("http://localhost:3000","/api/books/").concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,a=c.data,e.abrupt("return",{book:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=l},rEGw:function(e,t,n){"use strict";var r=n("nKUr"),o=n("rePB"),c=n("q1tI"),a=n("20a2"),s=n("7r2f"),i=n("o0o1"),u=n.n(i),l=n("HaE+");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b(b({},t),{},{isbn:parseInt(t.isbn)}))}).then((function(e){return e.json()})).then((function(e){e.success?(alert("Saved successfully!"),n()):alert(e.message)})).catch((function(e){alert("Error:",e),console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=n("wyBh");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.book,n=Object(a.useRouter)(),i="text-red-500 m-h-3",u={title:"",author:"",description:"",isbn:""};null!==t&&void 0!==t&&(u=j({},t));var l=Object(c.useState)(j({},u)),p=l[0],b=l[1],d=Object(c.useState)({}),O=d[0],y=d[1],x=function(e){b(j(j({},p),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(r.jsx)(s.a,{children:Object(r.jsxs)("div",{className:"container mx-auto flex flex-col p-9 rounded-lg space-y-4 md:max-w-xl bg-gray-800",children:[Object(r.jsx)("input",{type:"text",name:"title",value:p.title,className:"flex-1 appearance-none border border-transparent w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-md rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-green-300 focus:border-transparent",placeholder:"Title",onChange:x}),Object(r.jsx)("p",{className:i,children:O.title}),Object(r.jsx)("input",{type:"text",name:"author",value:p.author,className:"flex-1 appearance-none border border-transparent w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-md rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-green-300 focus:border-transparent",placeholder:"Author",onChange:x}),Object(r.jsx)("p",{className:i,children:O.author}),Object(r.jsx)("textarea",{name:"description",value:p.description,className:"flex-1 appearance-none border border-transparent w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-md rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-green-300 focus:border-transparent",placeholder:"Description",onChange:x}),Object(r.jsx)("p",{className:i,children:O.description}),Object(r.jsx)("input",{type:"number",name:"isbn",min:"1000000000000",max:"9999999999999",value:p.isbn,className:"flex-1 appearance-none border border-transparent w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-md rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-green-300 focus:border-transparent",placeholder:"ISBN",onChange:x}),Object(r.jsx)("p",{className:i,children:O.isbn}),Object(r.jsx)("a",{onClick:function(e){e.preventDefault();var r,o,c=function(){var e={};return p.title?p.title.length>g.g&&(e.title="Title cannot have more than ".concat(g.g," characters")):e.title="Title is required",p.author?p.author.length>g.a&&(e.author="Author cannot have more than ".concat(g.a," characters")):e.author="Author is required",p.description?p.description.length>g.b&&(e.description="Description cannot have more than ".concat(g.b," characters")):e.description="Description is required",p.isbn?(NaN===parseInt(p.isbn)||p.isbn<g.d||p.isbn>g.c)&&(e.isbn="ISBN must be between ".concat(g.d," and ").concat(g.c)):e.isbn="ISBN is required and must be a number between ".concat(g.d," and ").concat(g.c),e}();y(c),0===Object.keys(c).length&&(null!==t&&void 0!==t?(r=p,o=function(){n.push("/")},fetch("/api/books/".concat(r._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h(h({},r),{},{isbn:parseInt(r.isbn)}))}).then((function(e){return e.json()})).then((function(e){e.success?(alert("Updated successfully!"),o()):alert(e.json().message)})).catch((function(e){alert("Error:",e)}))):f(p,(function(){n.push("/")})))},className:"cursor-pointer text-center bg-gray-200 text-green text-base font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-green-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-green-200",children:"Save"})]})})}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},wyBh:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return u}));var r="CHECKED_OUT",o="AVAILABLE",c=150,a=150,s=2e3,i=1e12,u=9999999999999}},[["EqCD",0,2,3,1,4]]]);